(this.webpackJsonpcasset=this.webpackJsonpcasset||[]).push([[0],{35:function(e,t,a){e.exports=a.p+"static/media/logo.8a4e1940.svg"},36:function(e,t,a){e.exports=a(66)},41:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),i=a.n(c),l=(a(41),a(33)),s=a(3),u=a(9);var o=function(e){return e.loading?r.a.createElement("div",{className:"loading"},r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))):e.children};var m=Object(u.b)((function(e){return{currentMusic:e.playerReducer.music,isPlaying:e.playerReducer.isPlaying}}),(function(e){return{setMusic:function(t){return e({type:"SET_MUSIC",payload:t})},togglePlay:function(){return e({type:"TOGGLE_PLAY"})}}}))((function(e){var t=e.music,a=e.currentMusic,n=e.setMusic,c=e.togglePlay,i=e.isPlaying;return r.a.createElement("div",{className:"music-wrapper",onClick:function(){return a.id===t.id?c():n(t)}},r.a.createElement("div",{className:"music-wrapper__image"},a.id===t.id?r.a.createElement("div",{className:"music-wrapper__image__overlay"},r.a.createElement("i",{className:"fal "+(i?"fa-pause":"fa-play")})):"",r.a.createElement("img",{src:t.cover,alt:t.title})),r.a.createElement("div",{className:"music-wrapper__body"},r.a.createElement("strong",null,t.name),r.a.createElement("small",null,t.artists.length>1?t.artists.map((function(e,a){return e.name+(a!==t.artists.length-1?", ":"")})):t.artists[0].name)))}));var d=function(e){var t=e.musics,a=e.loading;return r.a.createElement(o,{loading:a},r.a.createElement("div",{className:"musics-container"},r.a.createElement("div",{className:"musics-container__inner"},t.map((function(e,t){return r.a.createElement(m,{key:t,music:e})})))))};var p=function(e){var t=e.playlist;return r.a.createElement("div",{className:"music-wrapper playlist-wrapper"},r.a.createElement("div",{className:"music-wrapper__image playlist-wrapper__image"},r.a.createElement("img",{src:t.image,alt:t.name})),r.a.createElement("div",{className:"music-wrapper__body playlist-wrapper__body"},r.a.createElement("strong",null,t.name)))};var E=function(e){var t=e.playlists,a=e.loading;return r.a.createElement(o,{loading:a},r.a.createElement("div",{className:"musics-container playlists-container"},r.a.createElement("div",{className:"musics-container__inner playlists-container__inner"},t.map((function(e,t){return r.a.createElement(p,{key:t,playlist:e})})))))};var f=function(e){var t=e.data,a=t.name,n=t.type,c=t.data;return r.a.createElement("div",{className:"vitrine-wrapper"},r.a.createElement("h2",{className:"vitrine-title"},a),"musics"===n?r.a.createElement(d,{musics:c,loading:!1}):r.a.createElement(E,{playlists:c,loading:!1}))},_=a(13),v=a.n(_),y=a(18),g=a(19),b=a.n(g),h="https://cassetmusic.com/api/v1",N=function(e,t){return t(e.data)},O=function(e,t){return e.response&&t(e.response.data),console.error(e)},j={getMusics:function(){return new Promise((function(e){b()({url:"".concat(h,"/musics"),method:"GET"}).then((function(t){return N(t,e)})).catch((function(t){return O(t,e)}))}))},getPlaylistsVitrines:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"us";return new Promise((function(a){b()({url:"".concat(h,"/playlists/vitrines?count=").concat(e,"&region=").concat(t),method:"GET"}).then((function(e){return N(e,a)})).catch((function(e){return O(e,a)}))}))}};var S=[{routeName:"home",component:Object(u.b)((function(e){return{musicsFind:e.homeReducer.musicsFind,vitrines:e.homeReducer.vitrines}}),(function(e){return{fetchMusicsFind:function(){return e(function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_MUSICS_FIND"}),e.next=3,j.getMusics();case 3:if(!(a=e.sent).success){e.next=9;break}return n=a.data,e.abrupt("return",t({payload:n,type:"FETCH_MUSICS_FIND_SUCCESS"}));case 9:return e.abrupt("return",t({type:"FETCH_MUSICS_FIND_FAILED"}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},fetchVitrines:function(){return e(function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_VITRINES"}),e.next=3,j.getPlaylistsVitrines();case 3:if(!(a=e.sent).success){e.next=9;break}return n=a.data,e.abrupt("return",t({payload:n,type:"FETCH_VITRINES_SUCCESS"}));case 9:return e.abrupt("return",t({type:"FETCH_VITRINES_FAILED"}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){var t=e.musicsFind,a=e.vitrines,c=e.fetchMusicsFind,i=e.fetchVitrines;return Object(n.useEffect)((function(){c(),i()}),[]),r.a.createElement("main",{className:"container"},r.a.createElement("h2",{className:"section-title"},"Discover New Music"),r.a.createElement(d,{musics:t.data,loading:t.loading}),a.data.map((function(e){return r.a.createElement(f,{data:e})})))})),exact:!0,path:"/"}],I=function(){return r.a.createElement(l.a,null,r.a.createElement(s.d,null,S.map((function(e,t){return r.a.createElement(s.b,{key:t,exact:!!e.exact,path:e.path,component:function(){return r.a.createElement(e.component,null)}})})),r.a.createElement(s.b,{component:function(){return r.a.createElement(s.a,{to:"/"})}})))},F=(a(65),a(11)),w=a(34),T=a(1),P={musicsFind:{data:[],loading:!1},vitrines:{data:[],loading:!1}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MUSICS_FIND":return Object(T.a)(Object(T.a)({},e),{},{musicsFind:Object(T.a)(Object(T.a)({},e.musicsFind),{},{loading:!0})});case"FETCH_MUSICS_FIND_SUCCESS":return Object(T.a)(Object(T.a)({},e),{},{musicsFind:{data:t.payload,loading:!1}});case"FETCH_MUSICS_FIND_FAILED":return Object(T.a)(Object(T.a)({},e),{},{musicsFind:Object(T.a)(Object(T.a)({},e.musicsFind),{},{loading:!1})});case"FETCH_VITRINES":return Object(T.a)(Object(T.a)({},e),{},{vitrines:Object(T.a)(Object(T.a)({},e.vitrines),{},{loading:!0})});case"FETCH_VITRINES_SUCCESS":return Object(T.a)(Object(T.a)({},e),{},{vitrines:{data:t.payload,loading:!1}});case"FETCH_VITRINES_FAILED":return Object(T.a)(Object(T.a)({},e),{},{vitrines:Object(T.a)(Object(T.a)({},e.vitrines),{},{loading:!1})});default:return e}},k={isPlaying:!1,music:{},playlist:[],currentPos:0,duration:0},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_PLAY":return Object(T.a)(Object(T.a)({},e),{},{isPlaying:!e.isPlaying});case"SET_MUSIC":return Object(T.a)(Object(T.a)({},e),{},{music:t.payload,isPlaying:!0});case"SET_PLAYLIST":return Object(T.a)(Object(T.a)({},e),{},{playlist:t.payload});case"SET_POS":return Object(T.a)(Object(T.a)({},e),{},{currentPos:t.payload});case"SET_DURATION":return Object(T.a)(Object(T.a)({},e),{},{duration:t.payload});default:return e}},R=Object(F.c)({homeReducer:C,playerReducer:M}),D=Object(F.d)(R,Object(F.a)(w.a)),U=a(35),x=a.n(U);var H=function(e){return r.a.createElement("header",null,r.a.createElement("div",{className:"container d-flex align-items-center justify-content-start"},r.a.createElement("img",{src:x.a,alt:"Casset"}),r.a.createElement("small",null,"Enjoy music without borders!")))};var L=Object(u.b)((function(e){return{currentMusic:e.playerReducer.music,isPlaying:e.playerReducer.isPlaying,currentPos:e.playerReducer.currentPos,duration:e.playerReducer.duration}}),(function(e){return{togglePlay:function(){return e({type:"TOGGLE_PLAY"})},setPos:function(t){return e({type:"SET_POS",payload:t})},setDuration:function(t){return e({type:"SET_DURATION",payload:t})}}}))((function(e){var t=e.currentMusic,a=e.isPlaying,c=e.currentPos,i=e.togglePlay,l=e.setPos,s=e.setDuration,u=e.duration,o=Object(n.useRef)(new Audio),m=Object(n.useRef)();return Object(n.useEffect)((function(){(t.link320||t.link128||t.link64)&&(o.current.src=t.link320||t.link128||t.link64,o.current.onloadedmetadata=function(){s(o.current.duration)},o.current.play(),a||i())}),[t]),Object(n.useEffect)((function(){a?(m.current=setInterval((function(){l(o.current.currentTime)}),500),o.current.play()):(clearInterval(m.current),m.current=null,o.current.pause())}),[a]),r.a.createElement("div",{className:"player-wrapper"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"player-inner"},r.a.createElement("div",{className:"player-inner__left"},r.a.createElement("div",{className:"player-inner__left__cover"},t.id?r.a.createElement("img",{src:t.cover||"",alt:t.name||"-"}):"")),r.a.createElement("div",{className:"player-inner__center"},r.a.createElement("div",{className:"player-inner__center__details"},t.id?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("strong",null,t.name||"-"),r.a.createElement("small",null,t.artists.length?t.artists.length>1?t.artists.map((function(e,a){return e.name+(a!==t.artists.length-1?", ":"")})):t.artists[0].name:"")),r.a.createElement("div",null,r.a.createElement("b",null,parseInt(c/60),":",c%60<10?"0"+parseInt(c%60):parseInt(c%60)),r.a.createElement("small",null,"/",parseInt(u/60),":",u%60<10?"0"+parseInt(u%60):parseInt(u%60)))):r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,"Start Playing Something..."),r.a.createElement("div",null,r.a.createElement("b",null,"-")))),r.a.createElement("div",{className:"player-inner__center__seekbar"},r.a.createElement("div",{className:"player-inner__center__seekbar__filled",style:{width:c>0?100*c/u+"%":0}},r.a.createElement("div",{className:"player-inner__center__seekbar__filled__thumb"})))),r.a.createElement("div",{className:"player-inner__right"},r.a.createElement("div",{className:"player-inner__right__actions"},r.a.createElement("i",{className:"fal fa-backward"}),r.a.createElement("i",{className:"fal "+(a?"fa-pause":"fa-play"),onClick:i}),r.a.createElement("i",{className:"fal fa-forward"}))))))}));var A=function(){return r.a.createElement(u.a,{store:D},r.a.createElement(H,null),r.a.createElement(I,null),r.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.83c066c6.chunk.js.map